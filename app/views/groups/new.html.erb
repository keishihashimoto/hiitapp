<main>
  <div class="text-center fs-3 bg-light py-2">グループの新規作成ページです</div>
  <%= render "shared/error_messages", model: @group_user_group %>
  <% if @messages.any? %>
    <% @messages.each do |message| %>
      <div class="error-message">
        <%= message %>
      </div>
    <% end %>
  <% end %>
  <div class="menu-detail">
    <%= form_with model: @group_user_group, url: groups_path, local: true do |f| %>
    <div class="form-group">
      <%= f.label :name, "グループの名前" %>
      <%= f.text_field :name, class:"form-control" %>
    </div>
    <div>
      <div >"このグループで取り組むHIIT"<i>（一つだけ選択してください）</i></div>
      <% if @enable_hiits.any? %>
        <% @enable_hiits.each do |hiit| %>
          <div>
            <div class="form-group form-check">
              <%= f.radio_button :hiit_id, hiit.id, class:"form-check-label" %>
              <%= f.label :hiit_id, hiit.name, class:"form-check-input" %>
              <%= hiit.active_time %>
              <%= hiit.rest_time %>
            </div>
            <div>
              このHIITを行う曜日：
              <% Wday.all.each do |wday| %>
                  <% if HiitDate.exists?(hiit_id: hiit.id, date: wday.id) %>
                    <%= wday.name %>
                  <% end %>
              <% end %>
            </div>
            <div class="menu-containers">
              <% hiit.menu_hiits.length.times do |i| %>
                <div class="each-menu-container">
                  <div><%= "#{i + 1}種目目" %></div>
                  <%= link_to menu_path(hiit.menu_hiits[i].menu) do %>
                    <%= image_tag hiit.menu_hiits[i].menu.icon.variant(resize: "100x100") %>
                    <%= hiit.menu_hiits[i].menu.name %>
                  <% end %>
                </div>
              <% end %>
            </div>
          </div>
        <% end %>
      <% else %>
        <div>現在利用可能なHIITはありません</div>
      <% end %>
    </div>
    
    <%= f.label :user_ids, "このグループのメンバー" %>
    
    <%= f.collection_check_boxes(:user_ids, @users, :id, :name, include_hidden: false, name: "group_user_group[user_ids][]") do |b| %>
      <div class="form-check form-check-inline form-group"><%= b.label {b.check_box + b.text } %></div>
    <% end %>
      
    
    <div class="form-group">
      <%= f.submit "グループを登録する", class:"btn form-control bg-light" %>
      <div class="lower-link">
        <button class="form-control bg-light btn"><%= link_to "チームのページに戻る", team_path(current_user.team), class:"text-secondary m-0 btn" %>
      </div>
    </div>
    <% end %>
  </div>
</main>